<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Code Review Assistant - CodeSentinel AI</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/language-indicator.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/features.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>
    <!-- Include Modern Header -->
    {% include 'components/header.html' %}

    <div class="container">
        <!-- Main Content -->
        <main class="main-content">
            <!-- Input Section -->
            <section class="input-section">
                <div class="editor-toolbar">
                    <div class="editor-toolbar-left">
                        <span class="editor-label" id="languageLabel">
                            <i class="fas fa-magic"></i>
                            <span id="detectedLanguage">Auto-detecting language...</span>
                        </span>
                        <button id="uploadBtn" class="btn btn-secondary" title="Upload Code File">
                            <i class="fas fa-upload"></i> Upload
                        </button>
                        <input type="file" id="fileInput" accept=".py,.js,.java,.cpp,.cs,.go,.rs,.php,.rb,.ts,.jsx,.tsx"
                            style="display: none;">
                        <select id="sampleSelect" class="language-select">
                            <option value="">Load Sample...</option>
                            <option value="python-good">Python - Good Code</option>
                            <option value="python-bad">Python - Needs Improvement</option>
                            <option value="javascript-good">JavaScript - Good Code</option>
                            <option value="javascript-bad">JavaScript - Needs Improvement</option>
                        </select>
                    </div>
                    <div class="editor-toolbar-right">
                        <button id="clearBtn" class="btn btn-secondary">
                            <i class="fas fa-eraser"></i> Clear
                        </button>
                    </div>
                </div>
                <textarea id="codeInput" class="code-editor" placeholder="# Paste your code here for dual AI-powered analysis...
# The system will analyze using both ML Model (CodeBERT) and AI (Gemini)

def example():
    pass"></textarea>
                <div style="padding: 16px; display: flex; justify-content: center;">
                    <button id="analyzeBtn" class="btn btn-primary">
                        <i class="fas fa-play"></i> Run Analysis
                    </button>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-chart-line"></i> Analysis Results</h2>
                    <div class="result-actions">
                        <button id="exportPdfBtn" class="btn btn-primary">
                            <i class="fas fa-file-pdf"></i> Export PDF
                        </button>
                        <button id="historyBtn" class="btn btn-secondary">
                            <i class="fas fa-history"></i> History
                        </button>
                    </div>
                </div>

                <!-- Visualization Charts -->
                <div class="charts-container">
                    <div class="chart-card">
                        <h3><i class="fas fa-chart-bar"></i> Quality Metrics Comparison</h3>
                        <canvas id="metricsChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3><i class="fas fa-chart-pie"></i> Issues Distribution</h3>
                        <canvas id="issuesChart"></canvas>
                    </div>
                </div>

                <!-- Comparison Grid -->
                <div class="comparison-container">
                    <!-- ML Model Analysis -->
                    <div class="analysis-column">
                        <div class="column-header ml-header">
                            <h3>
                                <span class="column-title">
                                    <i class="fas fa-brain"></i>
                                    ML Model Analysis
                                </span>
                                <span class="tech-badge">CodeBERT</span>
                            </h3>
                        </div>

                        <!-- ML Overall Quality -->
                        <div class="card quality-card">
                            <div class="card-header">
                                <h3><i class="fas fa-star"></i> Overall Quality</h3>
                                <span id="mlQualityScore" class="score-badge">-</span>
                            </div>
                            <p id="mlQualitySummary" class="summary-text"></p>
                        </div>

                        <!-- ML Metrics -->
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <i class="fas fa-project-diagram"></i>
                                <div class="metric-label">Complexity</div>
                                <div id="mlComplexityScore" class="metric-value">-</div>
                            </div>
                            <div class="metric-card">
                                <i class="fas fa-eye"></i>
                                <div class="metric-label">Readability</div>
                                <div id="mlReadabilityScore" class="metric-value">-</div>
                            </div>
                            <div class="metric-card">
                                <i class="fas fa-tools"></i>
                                <div class="metric-label">Maintainability</div>
                                <div id="mlMaintainabilityScore" class="metric-value">-</div>
                            </div>
                        </div>

                        <!-- ML Bugs -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-bug"></i> Bugs & Issues</h3>
                                <span id="mlBugsCount" class="count-badge">0</span>
                            </div>
                            <div id="mlBugsList" class="issues-list"></div>
                        </div>

                        <!-- ML Security -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-shield-alt"></i> Security</h3>
                                <span id="mlSecurityCount" class="count-badge">0</span>
                            </div>
                            <div id="mlSecurityList" class="issues-list"></div>
                        </div>

                        <!-- ML Improvements -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-lightbulb"></i> Improvements</h3>
                                <span id="mlImprovementsCount" class="count-badge">0</span>
                            </div>
                            <div id="mlImprovementsList" class="issues-list"></div>
                        </div>

                        <!-- ML Best Practices -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-check-circle"></i> Best Practices</h3>
                                <span id="mlPracticesCount" class="count-badge">0</span>
                            </div>
                            <div id="mlPracticesList" class="issues-list"></div>
                        </div>
                    </div>

                    <!-- AI Analysis -->
                    <div class="analysis-column">
                        <div class="column-header ai-header">
                            <h3>
                                <span class="column-title">
                                    <i class="fas fa-robot"></i>
                                    AI Analysis
                                </span>
                                <span class="tech-badge">Gemini 2.0 Flash</span>
                            </h3>
                        </div>

                        <!-- AI Overall Quality -->
                        <div class="card quality-card">
                            <div class="card-header">
                                <h3><i class="fas fa-star"></i> Overall Quality</h3>
                                <span id="aiQualityScore" class="score-badge">-</span>
                            </div>
                            <p id="aiQualitySummary" class="summary-text"></p>
                        </div>

                        <!-- AI Metrics -->
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <i class="fas fa-project-diagram"></i>
                                <div class="metric-label">Complexity</div>
                                <div id="aiComplexityScore" class="metric-value">-</div>
                            </div>
                            <div class="metric-card">
                                <i class="fas fa-eye"></i>
                                <div class="metric-label">Readability</div>
                                <div id="aiReadabilityScore" class="metric-value">-</div>
                            </div>
                            <div class="metric-card">
                                <i class="fas fa-tools"></i>
                                <div class="metric-label">Maintainability</div>
                                <div id="aiMaintainabilityScore" class="metric-value">-</div>
                            </div>
                        </div>

                        <!-- AI Bugs -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-bug"></i> Bugs & Issues</h3>
                                <span id="aiBugsCount" class="count-badge">0</span>
                            </div>
                            <div id="aiBugsList" class="issues-list"></div>
                        </div>

                        <!-- AI Security -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-shield-alt"></i> Security</h3>
                                <span id="aiSecurityCount" class="count-badge">0</span>
                            </div>
                            <div id="aiSecurityList" class="issues-list"></div>
                        </div>

                        <!-- AI Improvements -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-lightbulb"></i> Improvements</h3>
                                <span id="aiImprovementsCount" class="count-badge">0</span>
                            </div>
                            <div id="aiImprovementsList" class="issues-list"></div>
                        </div>

                        <!-- AI Best Practices -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-check-circle"></i> Best Practices</h3>
                                <span id="aiPracticesCount" class="count-badge">0</span>
                            </div>
                            <div id="aiPracticesList" class="issues-list"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Loading Spinner -->
            <div id="loadingSpinner" class="loading-spinner" style="display: none;">
                <div class="spinner"></div>
                <p>Analyzing your code with AI...</p>
            </div>

            <!-- Error Message -->
            <div id="errorMessage" class="error-message" style="display: none;"></div>
        </main>
    </div>

    <!-- Include Modern Footer -->
    {% include 'components/footer.html' %}

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/features.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>